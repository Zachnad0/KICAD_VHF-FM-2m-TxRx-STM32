# KICAD_VHF-FM-2m-TxRx-STM32
VHF narrowband FM transmitter and receiver radio for the 2m amatuer band, controlled by a cheap little STM32. May possibly be integrated into a portable casing.
Additionally, an LCD with waterfall display could be incorporated.

## Features & Specifications

### Transmitting
- Output at least 10 W (40 dBm) on the VHF 2m band, between 144 and 148 MHz.
- Frequency deviation around 26.000 MHz IF of ±5 kHz, modulation frequency from 0.3 to 3 kHz.
	- Rough tuning sensitivity of ~0.68 MHz/V. Fine audio modulation sensitivity of roughly 50 kHz/V.
	- Carson's rule: $\text{BW}=2(f_m+f_\Delta)=2(3+5)\text{ kHz}=16\text{ kHz}$    (Complies with MBIE bandplan)
	- PLL charge-pump bandwidth must thus be ~30 Hz to avoid suppression of audio FM.
- Channel to be selected from STM32 in increments of 25 kHz, through setting frequency division ratio of LO VCO PLL.
- LO generated by a custom discrete VCO from 170 to 174 MHz. Tuning sensitivity of ~8.5 MHz/V.
	- LO PLL loop bandwidth can e 
- 26.000 MHz SPXO as the reference clock in generating both LO and IF.
- 2x ADF4002 used for frequency division, phase-frequency detectors, and charge pumps for both LO and IF PLLs.
- LO and IF downmix to get RF, that shall be 144-148 MHz with ±5 kHz FM deviation after bandpass-filtering.

### Receiving
- Receive anywhere on the VHF 2m band from 144 to 148 MHz.
- Additionally receive commercial stations between 87.5 and 108 MHz.
- (TBD) Simple PFD against some adjustable VHF ref signal? Heterodyne downmix it if necessary?

### Waterfall/Spectrum Analysis
- Heterodyne downmixing before ADC?
- Dedicated digital logic and DRAM for asynchronously acquiring data from the ADC? FPGA/PLD if cost is reasonable?

### MCU & Misc. Systems
- STM32F103 for system-level radio control such as Rx frequency, Tx frequency via PLL divider ratios, and managing interfaces. Other settings may be adjustable like volume and audio out, or pre-programmed such as transmit slip offset for repeaters in NZ.
- Some kind of LED display for the waterfall and Rx/Tx frequency information.
- BNC and/or SMA antenna port.
- Buttons, switches, and control dials TBD.
- Li-ion or Lipo battery supply, followed by low-noise LDO linear voltage regulators. RF chokes and decoupling caps wherever necessary

